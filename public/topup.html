<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Top Up Saldo - Fruit Game</title>
  <style>
    :root {
      --glass: rgba(0,0,0,.65);
      --accent: #ffd700;
      --text: #fff;
    }
    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: url("public/image/wallpaper-06.jpg") no-repeat center center fixed;
      background-size: cover;
      color: var(--text);
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
      padding: 20px;
    }
    .wrap{ width: 100%; max-width: 420px; }
    h1{
      text-align: center; margin: 0 0 12px;
      text-shadow: 0 0 12px #000;
    }
    .card{
      background: var(--glass);
      border: 1px solid rgba(255,255,255,.15);
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 12px 24px rgba(0,0,0,.35);
      backdrop-filter: blur(3px);
    }
    label{ display:block; margin:10px 0 6px; font-weight: 600; }
    input, select, textarea{
      width:100%; padding:12px 12px;
      border-radius:10px; border:1px solid rgba(255,255,255,.25);
      background: rgba(0,0,0,.35); color:#fff; outline:none;
      font-size:15px;
    }
    input[readonly]{ opacity:.9; }
    .hint{ font-size:12px; opacity:.85; margin-top:6px; }
    .row{ display:flex; gap:10px; }
    .row > *{ flex:1; }
    .btn{
      width:100%; margin-top:14px; padding:13px;
      background: var(--accent); color:#000; font-weight: 800; font-size:16px;
      border:none; border-radius:10px; cursor:pointer;
      box-shadow: 0 8px 16px rgba(0,0,0,.35);
      transition: transform .05s ease, filter .2s ease;
    }
    .btn:active{ transform: translateY(1px); filter: brightness(.95); }
    .steps{
      margin-top:14px; font-size: 13px; line-height: 1.5; opacity:.95;
    }
    .badge{
      display:inline-block; padding:4px 8px; border-radius:999px;
      background: rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.2);
      font-size:12px; margin-top:6px;
    }
    .pay-info{
      margin-top:10px; padding:10px;
      border-radius:8px; background:rgba(0,0,0,.45);
      font-size:14px; line-height:1.4;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ðŸ’° Top Up Saldo</h1>
    <div class="card">
      <div class="row">
        <div>
          <label for="username">Username Game</label>
          <input id="username" type="text" placeholder="contoh: dimas99" autocomplete="username" />
        </div>
        <div>
          <label for="topupId">ID TopUp</label>
          <input id="topupId" type="text" readonly />
          <div class="hint">Otomatis dibuat untuk memudahkan cek.</div>
        </div>
      </div>

      <label for="nominal">Nominal (Rp)</label>
      <input id="nominal" type="number" min="1000" inputmode="numeric" placeholder="contoh: 20000" />
      <div class="hint">Minimal disarankan Rp 5.000.</div>

      <label for="method">Metode Pembayaran</label>
      <select id="method">
        <option value="">-- Pilih Metode --</option>
        <option value="DANA">DANA</option>
        <option value="GoPay">GoPay</option>
        <option value="BNI">Transfer Bank BNI</option>
        <option value="BRI">Transfer Bank BRI</option>
        <option value="BCA">Transfer Bank BCA</option>
      </select>

      <!-- tempat muncul nomor tujuan -->
      <div id="payInfo" class="pay-info" style="display:none;"></div>

      <label for="note">WAJIB ISI (SALDO AWAL)</label>
      <textarea id="note" rows="2" placeholder="Rp. 123"></textarea>

      <div class="badge" id="previewRupiah">Rp 0</div>

      <button class="btn" onclick="goWhatsApp()">Chat WhatsApp Admin</button>

      <div class="steps">
        <strong>Langkah:</strong><br/>
        1) Isi username & nominal â†’ <em>Chat WhatsApp Admin</em>.<br/>
        2) Lakukan pembayaran sesuai metode yang dipilih.<br/>
        3) <u>Kirim screenshot bukti transfer</u> di chat WhatsApp tersebut.<br/>
        4) Admin verifikasi & saldo akan masuk ke akun kamu.
      </div>
    </div>
  </div>

  <script>
    // === Konfigurasi: nomor tujuan per metode ===
    const ACCOUNTS = {
      "DANA": "0895-7043-49760 (a.n. Rendi Waniko)",
      "GoPay": "0895-7043-49760 (a.n. Rendi Waniko)",
      "BNI": "1911637415 (BNI a.n. Rendi Waniko)",
      "BRI": "480801020529539 (BRI a.n. Rendi Waniko)",
      "BCA": "8955480364 (BCA a.n. Rendi Waniko)"
    };

    const ADMIN_WA = "62895704349760"; 

    // Generate ID TopUp unik
    function genTopupId(){
      const d = new Date();
      const pad = n => String(n).padStart(2,'0');
      const y = String(d.getFullYear()).slice(2);
      const md = pad(d.getMonth()+1) + pad(d.getDate());
      const rand = Math.random().toString(36).slice(2,8).toUpperCase();
      return `FG-${y}${md}-${rand}`;
    }

    // Format Rupiah sederhana
    function formatRupiah(val){
      if(!val || isNaN(val)) return "Rp 0";
      return "Rp " + Number(val).toLocaleString("id-ID");
    }

    // Set awal
    const idEl = document.getElementById('topupId');
    const nomEl = document.getElementById('nominal');
    const prevEl = document.getElementById('previewRupiah');
    const methodEl = document.getElementById('method');
    const payInfoEl = document.getElementById('payInfo');

    function refreshId(){ idEl.value = genTopupId(); }
    refreshId();

    nomEl.addEventListener('input', () => {
      prevEl.textContent = formatRupiah(nomEl.value);
    });

    // Update info pembayaran saat pilih metode
    methodEl.addEventListener('change', () => {
      const val = methodEl.value;
      if(val && ACCOUNTS[val]){
        payInfoEl.style.display = "block";
        payInfoEl.textContent = "Tujuan Transfer: " + ACCOUNTS[val];
      } else {
        payInfoEl.style.display = "none";
      }
    });

    function goWhatsApp(){
      const username = document.getElementById('username').value.trim();
      const topupId  = document.getElementById('topupId').value.trim();
      const nominal  = document.getElementById('nominal').value.trim();
      const method   = document.getElementById('method').value;
      const note     = document.getElementById('note').value.trim();

      if(!username){ alert("Isi username dulu ya."); return; }
      if(!nominal || Number(nominal) <= 0){ alert("Isi nominal top up yang valid."); return; }
      if(!method){ alert("Pilih metode pembayaran."); return; }

      const now = new Date();
      const waktu = now.toLocaleString("id-ID", { hour12:false });

      const tujuan = ACCOUNTS[method] || "";

      const message =
`Halo admin, saya ingin TOP UP saldo Fruit Game.

ID TopUp : ${topupId}
Username : ${username}
Nominal  : ${formatRupiah(nominal)}
Metode   : ${method}
Tujuan   : ${tujuan}
Waktu    : ${waktu}
${note ? "Catatan  : " + note + "\n" : ""}

Setelah pesan ini terkirim, saya akan mengirimkan *screenshot bukti transfer* di chat ini. Mohon diproses ya. Terima kasih.`;

      const url = `https://wa.me/${ADMIN_WA}?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank");
      refreshId();
    }
  </script>
</body>
</html>
